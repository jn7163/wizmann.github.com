<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Sequence Median</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Open Graph tags -->

            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Sequence Median"/>
            <meta property="og:url" content="http://wizmann.tk/sequence-median.html"/>
            <meta property="og:description" content="Description Given a sequence of integer numbers, try to find the median of the sequence. Extending Make sure your code can get the right answer in any conditions Make sure your code work effectively on some special kinds of sequence. For example, ordered sequence or a nearly ordered one, a ..."/>

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://wizmann.tk/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://wizmann.tk/theme/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://wizmann.tk/theme/css/pygments.css" rel="stylesheet">
    <link rel="stylesheet" href="http://wizmann.tk/theme/css/style.css" type="text/css"/>
    <script src="http://wizmann-tk-pic.u.qiniudn.com/jquery.js"></script>


    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-46053117-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();

    </script>

    <!-- QQ 统计 -->
    <script type="text/javascript" src="http://tajs.qq.com/stats?sId=34368006" charset="UTF-8"></script>
    <!-- Clicki统计 -->
    <script type='text/javascript'>
    (function() {
        var c = document.createElement('script'); 
        c.type = 'text/javascript';
        c.async = true;
        c.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'www.clicki.cn/boot/50179';
        var h = document.getElementsByTagName('script')[0];
        h.parentNode.insertBefore(c, h);
    })();
    </script>

</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://wizmann.tk" class="navbar-brand">Maerlyn's Rainbow</a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="http://wizmann.tk/category/blog.html">Blog</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://wizmann.tk/archives.html"><i class="icon-th-list"></i>Archives</a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</nav>
<!-- /.navbar -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://wizmann.tk/sequence-median.html"
                       rel="bookmark"
                       title="Permalink to Sequence Median">
                        Sequence Median
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="icon-calendar"></i>2014-12-14
    </span>



<span class="label label-default">Tags</span>
	<a href="http://wizmann.tk/tag/quick-sort.html">quick sort</a>
        /
	<a href="http://wizmann.tk/tag/median.html">median</a>
        /
	<a href="http://wizmann.tk/tag/partition.html">partition</a>
        /
	<a href="http://wizmann.tk/tag/priority-queue.html">priority queue</a>
</footer><!-- /.post-info -->                    </div>
                </div>
                <h2>Description</h2>

<p>Given a sequence of integer numbers, try to find the median of the sequence.</p>

<h3>Extending</h3>

<ul>
<li>Make sure your code can get the right answer in any conditions</li>
<li>Make sure your code work effectively on some special kinds of sequence. For example, ordered sequence or a nearly ordered one, a sequence with few unique items.</li>
<li>If the memory is not large enough for all the elements in the sequence, how can we implement this algorithm?</li>
<li>If it&#39;s not a sequence, but a data stream. How can we find the median?</li>
</ul>

<h2>Solution</h2>

<p>Finding the median is quite similar to finding the kth element.</p>

<p>The basic solution to find the kth element is to sort the sequence first, and then find the kth. It&#39;ll get the right answer, of course, but the time complexity is O(n * logn), which is not the optimized one.</p>

<p>There is a vintage algorithm to get the kth_element.</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">partition</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">st</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">st</span><span class="p">];</span>
    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">st</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">l</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">r</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="o">++</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="o">--</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">st</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]);</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">kth_element</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">kth_element</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">kth_element</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">st</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">,</span> <span class="kt">int</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">pivot_idx</span> <span class="o">=</span> <span class="n">partition</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">st</span><span class="p">,</span> <span class="n">end</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pivot_idx</span> <span class="o">-</span> <span class="n">st</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">==</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">array</span><span class="p">[</span><span class="n">pivot_idx</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">pivot_idx</span> <span class="o">-</span> <span class="n">st</span> <span class="o">&gt;=</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">kth_element</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">st</span><span class="p">,</span> <span class="n">pivot_idx</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">kth_element</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">pivot_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">k</span> <span class="o">-</span> <span class="p">(</span><span class="n">pivot_idx</span> <span class="o">-</span> <span class="n">st</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">find_median</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">kth_element</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">kth_element</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">kth_element</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
        <span class="k">return</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">);</span>
    <span class="p">}</span>
</pre></div>

<p>The time complexity of the algorithm is O(N). It works well in most conditions. But there is a potential error in the code, can you find it?</p>
<div class="highlight"><pre><span class="k">return</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">);</span>
</pre></div>

<p>If <code>a + b</code> is greater than INT_MAX, it will overflow, and make a mess to your code. The right way is：</p>
<div class="highlight"><pre><span class="k">return</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">a</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span>
</pre></div>

<p>There is another problem in the code. If the sequence is already ordered, the algorithm will take O(N^2) time, and can&#39;t work effectively as what we design. It is because the pivot is the very first element of the sequence (or the sub-sequence), if the sequence is ordered, we will partition the sequence into this:</p>

<pre><code>nil ++ pivot ++ [elements]</code></pre>

<p>The solution is to use the random pivot. And we will modify the code here.</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">partition</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">st</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">st</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">st</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">pivot_idx</span> <span class="o">=</span> <span class="n">st</span> <span class="o">+</span> <span class="n">random</span><span class="p">()</span> <span class="o">%</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">st</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">pivot_idx</span><span class="p">];</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">st</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">pivot_idx</span><span class="p">]);</span>

    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">st</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">l</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">r</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="o">++</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="o">--</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">st</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]);</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>This code will perform well for the ordered / nearly ordered data. But there is another &ldquo;however&rdquo;, what if there are few unique elements in the sequence?</p>

<p>For example, the sequence <code>[1, 1, 1, 1, 1, 1, 1]</code>. If we deal this sequence by the previous algorithms, it also takes O(N) time, because we can just separate the sequence into this:</p>

<pre><code>[elements] + pivot + nil</code></pre>

<p>This scenario is similar as the previous one. So we have to come up a new way to cope with it.</p>
<div class="highlight"><pre><span class="kt">int</span> <span class="nf">partition</span><span class="p">(</span><span class="kt">int</span> <span class="n">array</span><span class="p">[],</span> <span class="kt">int</span> <span class="n">st</span><span class="p">,</span> <span class="kt">int</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">st</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">st</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="n">pivot_idx</span> <span class="o">=</span> <span class="n">st</span> <span class="o">+</span> <span class="n">rand</span><span class="p">()</span> <span class="o">%</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">st</span><span class="p">);</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">st</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">pivot_idx</span><span class="p">]);</span>
    <span class="kt">int</span> <span class="n">pivot</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">st</span><span class="p">];</span>

    <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">st</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// &lt;- rewrite zone</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">==</span> <span class="n">pivot</span> <span class="o">&amp;&amp;</span> <span class="n">flag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">flag</span> <span class="o">^=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">==</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">l</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span> <span class="o">&amp;&amp;</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">==</span> <span class="n">pivot</span> <span class="o">&amp;&amp;</span> <span class="n">flag</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">flag</span> <span class="o">^=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">==</span> <span class="n">pivot</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">r</span><span class="o">--</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// &lt;- end of rewrite zone</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">l</span> <span class="o">&lt;=</span> <span class="n">r</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">l</span><span class="o">++</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="o">--</span><span class="p">]);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">st</span><span class="p">],</span> <span class="n">array</span><span class="p">[</span><span class="n">r</span><span class="p">]);</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>This code could put the same number into left part and right part by half.</p>

<p>With all these optimization, you can get an <strong>Accepted</strong> in the problem <a href="http://poj.org/problem?id=2623">POJ-2623</a>. But be ware, the function to initizalize of random number, <code>srand(time(NULL))</code>, is disallowed when using the G++ compiler, please choose C++ instead.</p>

<p>There&#39;s always something next, if we don&#39;t have enough memory to storage all the data in the sequence. We will use a heap to find the kth_element, and that will save half of the memory space. But the time complexity is O(n * logn) here.</p>
<div class="highlight"><pre><span class="c1">// This is a bad code :)</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
    <span class="kt">long</span> <span class="kt">long</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">input</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">n</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">priority_queue</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">long</span><span class="o">&gt;</span> <span class="n">pq</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%lld&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
        <span class="n">pq</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">((</span><span class="kt">int</span><span class="p">)</span><span class="n">pq</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.1f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mf">1.</span> <span class="o">*</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">a</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
        <span class="n">pq</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="kt">long</span> <span class="kt">long</span> <span class="n">b</span> <span class="o">=</span> <span class="n">pq</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.1f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="kt">double</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>

<p>Okay, there is the last problem: what if the sequence is a stream that you have to find the median whenver a new number comes in? The solution is using two heaps. The max heap storages the numbers which less than the median, and the min heap storages the numbers which greater than the median.</p>
<div class="highlight"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">MaxHeap</span><span class="o">:</span> <span class="k">public</span> <span class="n">priority_queue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{};</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">MinHeap</span><span class="o">:</span> <span class="k">public</span> <span class="n">priority_queue</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">greater</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="p">{};</span>

<span class="k">class</span> <span class="nc">MedianStream</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">u</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_max_heap</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span> <span class="o">||</span> <span class="n">u</span> <span class="o">&lt;=</span> <span class="n">_max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">_max_heap</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">_min_heap</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">do_adjust</span><span class="p">();</span>
        <span class="n">_size</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">double</span> <span class="n">get_median</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">_size</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">_max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="n">_max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
            <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">_min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">();</span>
            <span class="k">return</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">a</span> <span class="o">+</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">b</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">void</span> <span class="n">do_adjust</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">_max_heap</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">_min_heap</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_min_heap</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">_max_heap</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
            <span class="n">_max_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">_min_heap</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="n">_max_heap</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">_max_heap</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">_min_heap</span><span class="p">.</span><span class="n">top</span><span class="p">());</span>
            <span class="n">_min_heap</span><span class="p">.</span><span class="n">pop</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="nl">private:</span>
    <span class="kt">size_t</span> <span class="n">_size</span><span class="p">;</span>
    <span class="n">MaxHeap</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">_max_heap</span><span class="p">;</span>
    <span class="n">MinHeap</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">_min_heap</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>

            </div>
            <!-- /.entry-content -->
    <hr />
    <section class="comments" id="comments">
        <h2>Comments</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'wizmann'; // required: replace example with your forum shortname
            var disqus_identifier = 'sequence-median';
            var disqus_url = 'http://wizmann.tk/sequence-median.html';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-lg-3 well well-sm" id="sidebar">
<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="icon-home icon-large"></i>Social</h4></li>
                    <li class="list-group-item"><a href="https://github.com/wizmann"><i
                            class="icon-github-sign icon-large"></i>github
                    </a></li>
                    <li class="list-group-item"><a href="http://wizmann.tk/feeds/all.rss.xml"><i
                            class="icon-rss-sign icon-large"></i>rss
                    </a></li>



            <li class="list-group-item"><a href="http://wizmann.tk/tags.html"><h4><i class="icon-tags icon-large"></i>Tags</h4></a></li>
                <li class="list-group-item tag-1">
                    <a href="http://wizmann.tk/tag/suan-fa.html">
                        算法
                    </a>
                </li>
                <li class="list-group-item tag-1">
                    <a href="http://wizmann.tk/tag/codeforces.html">
                        codeforces
                    </a>
                </li>
                <li class="list-group-item tag-1">
                    <a href="http://wizmann.tk/tag/ti-jie.html">
                        题解
                    </a>
                </li>
                <li class="list-group-item tag-1">
                    <a href="http://wizmann.tk/tag/algorithm.html">
                        algorithm
                    </a>
                </li>
                <li class="list-group-item tag-2">
                    <a href="http://wizmann.tk/tag/interview.html">
                        interview
                    </a>
                </li>
                <li class="list-group-item tag-2">
                    <a href="http://wizmann.tk/tag/cpp.html">
                        cpp
                    </a>
                </li>
                <li class="list-group-item tag-2">
                    <a href="http://wizmann.tk/tag/gong-kai-ke.html">
                        公开课
                    </a>
                </li>
                <li class="list-group-item tag-2">
                    <a href="http://wizmann.tk/tag/xian-liao.html">
                        闲聊
                    </a>
                </li>
                <li class="list-group-item tag-2">
                    <a href="http://wizmann.tk/tag/chrome-extension.html">
                        chrome-extension
                    </a>
                </li>
                <li class="list-group-item tag-2">
                    <a href="http://wizmann.tk/tag/python.html">
                        python
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/she-ji-mo-shi.html">
                        设计模式
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/du-shu.html">
                        读书
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/cse351.html">
                        CSE351
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/protobuf.html">
                        protobuf
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/flatbuffer.html">
                        flatbuffer
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/induction.html">
                        induction
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/system-design.html">
                        system-design
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/stack.html">
                        stack
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/leetcode.html">
                        leetcode
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/google.html">
                        google
                    </a>
                </li>
                <li class="list-group-item tag-3">
                    <a href="http://wizmann.tk/tag/chuang-zao-li.html">
                        创造力
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/app.html">
                        app
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/yunfile.html">
                        Yunfile
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/queue.html">
                        queue
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/career.html">
                        career
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/head-first.html">
                        head-first
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/valgrind.html">
                        valgrind
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/markdown.html">
                        markdown
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/binary-tree.html">
                        binary tree
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/tlv.html">
                        TLV
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/cache.html">
                        cache
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/crack.html">
                        crack
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/multiprocess.html">
                        multiprocess
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/geohash.html">
                        GeoHash
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/fen-lei-qi.html">
                        分类器
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/median.html">
                        median
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/bing-fa-bian-cheng.html">
                        并发编程
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/cachegrind.html">
                        cachegrind
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/multithread.html">
                        multithread
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/partition.html">
                        partition
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/linux.html">
                        linux
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/zeromq.html">
                        zeromq
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/binary-indexed-tree.html">
                        binary indexed tree
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/cao-kuai-meng.html">
                        糙快猛
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/pelican.html">
                        pelican
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/geometric.html">
                        geometric
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/lock-less.html">
                        lock-less
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/get-things-done.html">
                        get things done
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/suo-yin.html">
                        索引
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/android.html">
                        android
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/string.html">
                        string
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/angularjs.html">
                        angularjs
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/protocol.html">
                        protocol
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/zi-fu-chuan.html">
                        字符串
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/priority-queue.html">
                        priority queue
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/allocate.html">
                        allocate
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/misaka.html">
                        misaka
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/poi.html">
                        POI
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/quick-sort.html">
                        quick sort
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/memory.html">
                        memory
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/ji-suan-ji-ke-xue.html">
                        计算机科学
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/encrypted.html">
                        encrypted
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/normal-distribution.html">
                        normal-distribution
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/asm.html">
                        asm
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/cocurrency.html">
                        cocurrency
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/distributed-system.html">
                        distributed system
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/si-wei.html">
                        思维
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/lian-biao.html">
                        链表
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/alloca.html">
                        alloca
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/zui-xiao-biao-shi-fa.html">
                        最小表示法
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/quartile.html">
                        quartile
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/graph.html">
                        graph
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/heap.html">
                        heap
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/useless.html">
                        useless
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/memory-barrier.html">
                        memory-barrier
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/gcj.html">
                        GCJ
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/profile.html">
                        profile
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/mian-shi.html">
                        面试
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/cpu.html">
                        cpu
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/c.html">
                        c++
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/ya-suo.html">
                        压缩
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/programming-interview.html">
                        programming interview
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/thread.html">
                        thread
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/quora.html">
                        quora
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/network.html">
                        network
                    </a>
                </li>
                <li class="list-group-item tag-4">
                    <a href="http://wizmann.tk/tag/metadata.html">
                        metadata
                    </a>
                </li>

            <li class="list-group-item"><h4><i class="icon-bullhorn icon-large"></i>Links</h4></li>
                <li class="list-group-item"><a href="http://getpelican.com/"><i
                        class="icon-bookmark icon-large"></i>Pelican
                </a></li>
                <li class="list-group-item"><a href="http://continuation.sinaapp.com/"><i
                        class="icon-bookmark icon-large"></i>Continuation
                </a></li>
                <li class="list-group-item"><a href="http://neutronest.sinaapp.com/"><i
                        class="icon-bookmark icon-large"></i>neutronest
                </a></li>
                <li class="list-group-item"><a href="http://blog.csdn.net/u011613321"><i
                        class="icon-bookmark icon-large"></i>阿歇的AC之路
                </a></li>

        </ul>
    </section>
</aside>        </div>
    </div>
</div>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://wizmann.tk/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://wizmann.tk/theme/js/respond.min.js"></script>

<!-- Protect Content in Pelican -->
<script type="text/javascript" src="http://wizmann.tk/theme/scripts/md5.js"></script>
<script type="text/javascript" src="http://wizmann.tk/theme/scripts/aes.js"></script>
<script type="text/javascript" src="http://wizmann.tk/theme/scripts/pad-nopadding-min.js"></script>
<script type="text/javascript" src="http://wizmann.tk/theme/scripts/protect_content.js"></script>

    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'wizmann'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>

<div id="clicki_widget_6646" ></div>
</body>
</html>